<!--pages/basic/me/me.wxml-->
<view class="bgimg-purple" wx:if="{{uinfo}}"></view>
<view class="bgimg-bg" wx:if="{{!uinfo}}"></view>
<cu-custom bgImage="true" hideAction="{{true}}">
	<view slot="content">{{uinfo?"æˆ‘çš„":"æ­¦å·¥å•†è¯¾è¡¨"}}</view>
</cu-custom>
<block wx:if="{{uinfo}}">
	<view class="user-info" bindtap="showModal" data-target="bottomModal" wx:if="{{!bindinfo.info}}">
		<view class="avatar">
			<image class="icon" src="{{uinfo.avatarUrl?uinfo.avatarUrl:'/assets/image/avatar.png'}}"></image>
		</view>
		<view class="info">
			<view class="title text-cut">{{uinfo.nickName}}</view>
			<view class="addtime text-cut"> å°šæœªç»‘å®šæ•™åŠ¡ç³»ç»Ÿè´¦å· (ç‚¹å‡»ç»‘å®š)</view>
		</view>
	</view>
	<view class="user-info" bindtap="unbindStuBtnClick" wx:if="{{bindinfo.info&&bindinfo.info.type=='student'}}">
		<view class="avatar">
			<image class="icon" src="{{uinfo.avatarUrl?uinfo.avatarUrl:''}}"></image>
		</view>
		<view class="info">
			<view class="title text-cut">{{bindinfo.info.name}}<text
					class="small margin-left-xs">{{bindinfo.info.major}}</text></view>
			<view class="addtime text-cut"> å­¦å·ï¼š{{bindinfo.stuId}} (ç‚¹å‡»è§£ç»‘) </view>
		</view>
		<text class="time-bg">{{bindinfo.info.department?bindinfo.info.department:"æ­¦æ±‰å·¥å•†å­¦é™¢"}}</text>
	</view>
	<view class="user-info" bindtap="unbindStuBtnClick" wx:if="{{bindinfo.info&&bindinfo.info.type=='teacher'}}">
		<view class="avatar">
			<image class="icon" src="{{uinfo.avatarUrl?uinfo.avatarUrl:''}}"></image>
		</view>
		<view class="info">
			<view class="title text-cut">{{bindinfo.info.name}}<text
					class="small margin-left-xs">{{bindinfo.info.major}}</text></view>
			<view class="addtime text-cut"> å·¥å·ï¼š{{bindinfo.stuId}} (ç‚¹å‡»è§£ç»‘) </view>
		</view>
		<text class="time-bg">{{bindinfo.info.department?bindinfo.info.department:"æ­¦æ±‰å·¥å•†å­¦é™¢"}}</text>
	</view>
	<view class="user-stats-box bg-white radius-0" wx:if="{{bindinfo.info.type=='student'}}">
		<view class="flex">
			<view class="flex-sub padding-xs">
				<view class="value">{{bindinfo.info.class?bindinfo.info.class:'-'}}</view>
				<view class="name">ä¸“ä¸šä¸ç­çº§</view>
			</view>
			<view class="flex-sub padding-xs">
				<view class="value">{{bindinfo.info.byts?bindinfo.info.byts+'å¤©':'-'}}</view>
				<view class="name">ç¦»æ¯•ä¸šè¿˜æœ‰</view>
			</view>
		</view>
	</view>
	<view class="user-set-box cu-list menu card-menu {{bindinfo.info.type=='teacher'||!bindinfo.info?'teacher':''}}">
		<view class="cu-item arrow">
			<view class="content" bindtap="toAbout">
				<image src="/assets/image/info.svg" class="png" mode="aspectFit"></image>
				<text class="text-grey">å…³äºæˆ‘ä»¬</text>
			</view>
		</view>
		<view class="cu-item arrow">
			<view class="content" bindtap="showQrcode">
				<image src="/assets/image/hold.svg" class="png" mode="aspectFit"></image>
				<text class="text-grey">èµèµæ”¯æŒ</text>
			</view>
		</view>
		<view class="cu-item arrow">
			<button class="cu-btn content" open-type="share">
				<image src="/assets/image/share.svg" class="png" mode="aspectFit"></image>
				<text class="text-grey">åˆ†äº«å°ç¨‹åº</text>
			</button>
		</view>
		<view class="cu-item arrow">
			<button class="cu-btn content" bindtap="showQQQrcode">
				<image src="/assets/image/service.svg" class="png" mode="aspectFit"></image>
				<text class="text-grey">åŠ å…¥ä¼é¹…äº¤æµç¾¤</text>
			</button>
		</view>
		<view class="cu-item arrow">
			<button class="cu-btn content" open-type="feedback">
				<image src="/assets/image/feedback.svg" class="png" mode="aspectFit"></image>
				<text class="text-grey">æ„è§åé¦ˆ</text>
			</button>
		</view>
		<view class="cu-item arrow">
			<view class="content" bindtap="userLogout">
				<image src="/assets/image/logout.svg" class="png" mode="aspectFit"></image>
				<text class="text-grey">é€€å‡ºç™»å½•</text>
			</view>
		</view>
	</view>
</block>
<block wx:if="{{!uinfo}}">
	<view class="login-box">
		<view class="logo"><image src="/assets/image/logo.png"></image></view>
		<view class="title">æ­¦å·¥å•†è¯¾è¡¨</view>
		<view class="sub-title">æ­¦æ±‰å·¥å•†å­¦é™¢è¯¾è¡¨å°ç¨‹åº ğŸ˜‹</view>
		<view class="sub-title">å’³å’³ï¼Œè¯´ç‚¹å•¥?</view>
		<view class="sub-title">æˆ‘åœ¨åˆ’æ°´ï¼Œåˆ«æ‰“æ‰°æˆ‘ ğŸ’¦</view>
		<view class="sub-title">Emmmmï¼Œæˆ‘è¯´ç‚¹å•¥ï¼Ÿ</view>
		<view class="sub-title">å¼€å‘å›ï¼šğŸ™‡ğŸ»â€åˆ«å«äººï¼Œæˆ‘åŠªåŠ›ï¼</view>
		<view class="sub-title">ç”±äººå·¥æ™ºèƒ½å­¦é™¢å­¦ç”Ÿè¿è¥ ğŸ¤–</view>
	</view>
	<view class="login-action" style="bottom: {{tabBarHeight+20}}px;">
		<view class="login-button bg-green shadow button-hover margin-top-xl" bindtap="userLogin">å¾®ä¿¡è´¦å·å¿«é€Ÿç™»å½•</view>
		<view class="login-tips">æç¤ºï¼šç™»å½•åç»‘å®šæ•™åŠ¡è´¦å·æ‰èƒ½æŸ¥é˜…è¯¾è¡¨å™¢~</view>
	</view>
</block>
<!-- ç»‘å®šæ•™åŠ¡ -->
<view class="cu-modal bottom-modal {{modalName=='bottomModal'?'show':''}}" wx:if="{{uinfo&&!bindinfo.info}}">
	<view class="cu-dialog">
		<view class="cu-bar">
			<view class="action">
				ç»‘å®šæ­¦æ±‰å·¥å•†å­¦é™¢æ•™åŠ¡ç³»ç»Ÿè´¦å·
			</view>
			<text class="action cuIcon-close" bindtap="hideModal"></text>
		</view>
		<view class="padding text-left">
			<form bindsubmit='bindStuBtnClick'>
				<view class="cu-form-group">
					<view class="title">å­¦å·</view>
					<input placeholder="å­¦å·" type="text" name="username"></input>
				</view>
				<view class="cu-form-group margin-top-lg">
					<view class="title">å¯†ç </view>
					<input placeholder="å¯†ç " type="password" name="password"></input>
				</view>
				<view class='ligin-button'>
					<button class="bindStuBtn margin-top-lg" formType="submit">ç«‹å³ç»‘å®š</button>
				</view>
			</form>
			<view class="margin-top-sm info-warning">
				æœ¬å°ç¨‹åºåç«¯ç³»ç»Ÿä¸ä¼šå­˜å‚¨ç”¨æˆ·æ•™åŠ¡ç³»ç»Ÿæ•°æ®åŠå¯†ç ã€‚
			</view>
		</view>
	</view>
</view>
